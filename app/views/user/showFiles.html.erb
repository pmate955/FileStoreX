<div class="col-md-12">
  <h4>My Files</h4>
  <div class="table-responsive">
    <table id="mytable" class="table table-bordred table-striped">
      <thead>
        <th>File name</th>
        <th>Password</th>
        <th>Downloaded</th>
        <th>URL</th>
        <th>Download encrypted</th>
        <th>Delete</th>
      </thead>
      <tbody>
        <% @list.each do |l| %>
          <tr>
            <td><%if l.path.end_with?'.bin'%>
                  <%=File.basename(l.path)[0...File.basename(l.path).index('.bin')] %>
                <%else%>
                  <%=File.basename(l.path)%>
                <%end%>
            </td>
            <td><%=l.password%></td>
            <td><% if l.downloadedNum > 0 %>
                    <%=l.status%> <%=l.downloadedNum%> times
                <%else%>
                    <%=l.status%>
                <%end%>
            </td>
            <td><%= link_to 'Link to file', {:controller => "file", :action => "show", :file_id => l.id}%></td>
            <td><%if l.path.end_with?'.bin'%>
                    <%= button_to 'Download', {:controller => "file", :action => "downloadEnc",:file_id => l.id, :user_id=> session[:user_id]} , method: :post%>
                <%else%>
                    <p>Not available for old files</p>
                <%end%>
            </td>
            <td><%= button_to 'Delete', {:controller => "file", :action => "deleteFile", :file_id => l.id, :user_id=> session[:user_id]} , method: :post%></td>
          </tr>
        <%end%>
      </tbody>
    </table>
  </div>
</div>

